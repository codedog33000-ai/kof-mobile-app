<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>King of Freight AI - Mobile</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a0e27">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="KOF AI">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%230f172a'/><text x='50' y='50' text-anchor='middle' dy='.3em' font-size='60'>ğŸš›</text></svg>">
</head>
<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <h1>ğŸš› King of Freight AI</h1>
      <p class="subtitle">AI-Powered Freight Broker Assistant</p>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-indicator">
        <span class="status-dot active" id="statusDot"></span>
        <span id="statusText">Connected</span>
      </div>
      <div class="stats-mini">
        <span title="Sent Today">ğŸ“¤ <strong id="miniSent">0</strong></span>
        <span title="AI Responses">ğŸ¤– <strong id="miniAI">0</strong></span>
      </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tab-nav">
      <button class="tab-btn active" data-tab="monitor">ğŸ“Š Monitor</button>
      <button class="tab-btn" data-tab="inbox">ğŸ“¬ Inbox</button>
      <button class="tab-btn" data-tab="messages">ğŸ’¬ Messages</button>
      <button class="tab-btn" data-tab="carriers">ğŸš› Carriers</button>
      <button class="tab-btn" data-tab="alerts">ğŸ”” Alerts</button>
    </div>

    <!-- Status Message -->
    <div id="statusMessage" class="status-message hidden"></div>

    <!-- Tab Content -->
    <div class="tab-content">

      <!-- Monitor Tab -->
      <div class="tab-pane active" id="tab-monitor">
        <h3>ğŸ“Š Live Monitor</h3>

        <!-- Quick Stats -->
        <div class="quick-stats">
          <div class="stat-card">
            <div class="stat-value" id="statSent">0</div>
            <div class="stat-label">Sent Today</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statReplies">0</div>
            <div class="stat-label">Replies</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statAI">0</div>
            <div class="stat-label">AI Handled</div>
          </div>
        </div>

        <!-- AUTONOMOUS MONITOR -->
        <div class="autonomous-monitor-section">
          <div class="autonomous-header">
            <div class="autonomous-title">
              <span class="lightning-icon">âš¡</span>
              <span class="title-text">AUTONOMOUS MONITOR</span>
              <span class="live-badge">â— LIVE</span>
            </div>
            <button class="btn-hide-monitor">Hide</button>
          </div>
          <div class="autonomous-subtitle">
            Automatic driver outreach â€¢ Real-time monitoring â€¢ Test mode active
          </div>

          <div class="autonomous-cards">
            <div class="autonomous-card">
              <div class="card-header">
                <span class="card-icon">ğŸ“‹</span>
                <span class="card-title">CURRENT DRIVER</span>
              </div>
              <div class="card-content">
                <div id="currentDriverStatus" class="driver-status">Idle</div>
                <div id="currentDriverInfo" class="driver-info">Waiting for extraction...</div>
              </div>
            </div>

            <div class="autonomous-card">
              <div class="card-header">
                <span class="card-icon">âœï¸</span>
                <span class="card-title">COMPOSING</span>
              </div>
              <div class="card-content">
                <div id="composingMessage" class="composing-content">Waiting...</div>
              </div>
            </div>
          </div>

          <div class="autonomous-footer">
            <div class="autonomous-status">
              <span class="status-icon">âš¡</span>
              <span>Autonomous mode active</span>
            </div>
            <div class="autonomous-actions">
              <button class="btn-send">ğŸ“§ SEND</button>
              <button class="btn-edit">âœï¸</button>
              <button class="btn-delete">âŒ</button>
            </div>
          </div>
        </div>

        <!-- Activity Feed -->
        <div class="activity-section">
          <div class="section-header">
            <h4>Activity Feed</h4>
            <button id="refreshBtn" class="btn btn-small btn-ghost">Refresh</button>
          </div>
          <div id="activityLog" class="activity-log">
            <div class="activity-item system">
              <div class="activity-icon">ğŸ’¡</div>
              <div class="activity-content">
                <div class="activity-text">Mobile app connected. Waiting for data...</div>
                <div class="activity-time">Just now</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Critical Alerts -->
        <div class="conversations-section">
          <div class="section-header">
            <h4>ğŸ”´ Critical Alerts</h4>
            <button id="clearAlertsBtn" class="btn btn-small btn-ghost">Clear</button>
          </div>
          <div id="criticalAlerts" class="conversations-list">
            <div class="empty-state">
              <p>No critical alerts</p>
              <small>Pickup/delivery notifications will appear here</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Inbox Tab -->
      <div class="tab-pane" id="tab-inbox">
        <div class="inbox-app-container">
          <!-- Sidebar -->
          <div class="inbox-sidebar">
            <div class="inbox-logo">ğŸ“¬ KOF Inbox</div>

            <button class="inbox-compose-btn" id="inboxComposeBtn">
              âœ‰ï¸ Compose
            </button>

            <div class="inbox-nav-item active" data-inbox-view="inbox">
              ğŸ“¨ Inbox
              <span class="inbox-nav-badge" id="inboxBadge">0</span>
            </div>
            <div class="inbox-nav-item" data-inbox-view="sent">
              ğŸ“¤ Sent
            </div>
            <div class="inbox-nav-item" data-inbox-view="conversations">
              ğŸ’¬ Conversations
            </div>
            <div class="inbox-nav-item" data-inbox-view="all">
              ğŸ“‹ All Messages
            </div>
          </div>

          <!-- Main Content Area -->
          <div class="inbox-main-content">
            <!-- Inbox View -->
            <div id="inboxView" class="inbox-view-container">
              <div class="inbox-header">
                <h1>Inbox</h1>
                <div class="inbox-header-actions">
                  <button class="inbox-btn" id="importAllBtn">ğŸ“¦ Import All History</button>
                  <button class="inbox-btn">ğŸ”„ Refresh</button>
                  <button class="inbox-btn-primary inbox-btn">Check for New Replies</button>
                </div>
              </div>
              <div class="inbox-message-list" id="inboxMessageList">
                <div class="inbox-loading">Loading messages...</div>
              </div>
            </div>

            <!-- Compose View -->
            <div id="inboxComposeView" class="inbox-compose-view">
              <div class="inbox-header">
                <h1 id="inboxComposeTitle">New Message</h1>
                <div class="inbox-header-actions">
                  <button class="inbox-btn" id="cancelComposeBtn">Cancel</button>
                </div>
              </div>
              <div class="inbox-compose-form">
                <div class="inbox-form-group">
                  <label>To (Email):</label>
                  <input type="email" id="composeEmail" placeholder="carrier@example.com">
                </div>
                <div class="inbox-form-group">
                  <label>Phone (WhatsApp):</label>
                  <input type="tel" id="composePhone" placeholder="+1234567890">
                </div>
                <div class="inbox-form-group">
                  <label>Company Name:</label>
                  <input type="text" id="composeCompany" placeholder="ABC Trucking">
                </div>
                <div class="inbox-form-group">
                  <label>Subject:</label>
                  <input type="text" id="composeSubject" value="Load Update">
                </div>
                <div class="inbox-form-group">
                  <label>Message:</label>
                  <textarea id="composeMessage" placeholder="Type your message here..."></textarea>
                </div>
                <div class="inbox-form-group">
                  <label>Send Via:</label>
                  <select id="composeChannel">
                    <option value="email">Email Only</option>
                    <option value="whatsapp">WhatsApp Only</option>
                    <option value="both">Both Email & WhatsApp</option>
                  </select>
                </div>
              </div>
              <div class="inbox-compose-actions">
                <button class="inbox-btn">Cancel</button>
                <button class="inbox-btn-primary inbox-btn">ğŸ“¤ Send</button>
              </div>
            </div>

            <!-- Message Detail View -->
            <div id="inboxMessageDetailView" class="inbox-message-detail">
              <div class="inbox-header">
                <h1>Message</h1>
                <div class="inbox-header-actions">
                  <button class="inbox-btn" id="backToInboxBtn">â† Back</button>
                </div>
              </div>
              <div class="inbox-message-detail-header">
                <div class="inbox-message-detail-subject" id="detailSubject"></div>
                <div class="inbox-message-detail-meta">
                  <span id="detailFrom"></span>
                  <span id="detailTime"></span>
                </div>
              </div>
              <div class="inbox-message-detail-body" id="detailBody"></div>
              <div class="inbox-message-detail-actions">
                <button class="inbox-btn-primary inbox-btn">â†©ï¸ Reply</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Messages Tab -->
      <div class="tab-pane" id="tab-messages">
        <h3>ğŸ’¬ Message History</h3>
        <div id="messagesList" class="messages-list">
          <div class="empty-state">
            <p>No messages yet</p>
            <small>Messages from extension will appear here</small>
          </div>
        </div>
      </div>

      <!-- Carriers Tab -->
      <div class="tab-pane" id="tab-carriers">
        <h3>ğŸš› Active Carriers</h3>
        <div id="carriersList" class="carriers-list">
          <div class="empty-state">
            <p>No carriers yet</p>
            <small>Extracted carriers will appear here</small>
          </div>
        </div>
      </div>

      <!-- Alerts Tab -->
      <div class="tab-pane" id="tab-alerts">
        <h3>ğŸ”” All Notifications</h3>
        <div id="allAlerts" class="alerts-list">
          <div class="empty-state">
            <p>No notifications yet</p>
            <small>All alerts will appear here</small>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="app-cloud.js"></script>
</body>
</html>
